<div class="main-content" id="maincontent">
    <div class="content">
        <div class="col-md-12 col-sm-6 col-xs-4">
            <div class="col-sm-6 col-md-6 col-xs-3 no-padding">
                <span class="legal">Download Old Mandate</span>
            </div>
            <div class="rightmenu">
                <div class="toolbar pull-right">
                    <ul class="toolbar-content">


                        <li>
                            <i class="fa fa-download" aria-hidden="true" title="Export"></i>
                            <!--<button type="button" class="btn btn-success" (click)="downloadExcel()">Download Mandate Excel File</button>-->
                            <!--<label (click)="download()">
                                Download Mandate Excel File
                            </label>-->
                        </li>
                        <li>
                            <i class="fa fa-file-text" aria-hidden="true" title="New"></i>
                            <label>
                                Download Scanned Mandate
                            </label>
                        </li>
                        <!--<li>
                            <i class="fa fa-pencil-square-o" aria-hidden="true" title="Edit"></i>
                            <label data-toggle="modal" data-target="#myModal" (click)="show()">
                                Reject Mandate
                            </label>
                        </li>-->
                        <li>
                            <i class="fa fa-floppy-o" aria-hidden="true" title="Save"></i>
                            <label>
                                Submit
                            </label>
                        </li>
                        <li style="display: none">
                            <i class="fa fa-key" aria-hidden="true" title="Reset Password"></i>
                            <label>
                                Reset Password
                            </label>
                        </li>
                        <li style="display: none">
                            <i class="fa fa-times" aria-hidden="true"
                               title="Delete"></i>
                            <label>
                                Delete
                            </label>
                        </li>
                        <li style="display:none;">
                            <i class="fa fa-reply" aria-hidden="true" title="Back"></i>
                            <label>
                                Back
                            </label>
                        </li>
                    </ul>
                </div>
            </div>
        </div>


        <div class="col-md-12 col-sm-12 col-xs-12">
            <div class="row no-padding">
                <div class="col-md-4 col-sm-4 col-xs-12">
                    <div class="form-group">
                        <label class="col-sm-5 col-md-4 col-xs-4 control-label no-padding" for="form-field-1">
                            From Date
                        </label>
                        <div class="col-sm-7 col-md-7 col-xs-7 no-padding-left displayinlineblock">
                            <input type="date" name="FromDate" #FromDate value="{{CurrentDate | date:'yyyy-MM-dd'}}" class="col-sm-12 col-md-12 col-xs-12" style="height: 22px;" />
                        </div>
                    </div>
                </div>
                <div class="col-md-4 col-sm-4 col-xs-12  no-padding ">
                    <div class="form-group">
                        <label class="col-sm-6 col-md-4 col-xs-4 control-label no-padding" for="form-field-1">
                            To Date
                        </label>
                        <div class="col-sm-6 col-md-7 col-xs-7 no-padding-left displayinlineblock">
                            <input type="date" name="ToDate" #ToDate (change)="mydate(FromDate.value,ToDate.value,selected.value)" value="{{CurrentDate | date:'yyyy-MM-dd'}}" class="col-sm-12 col-md-12 col-xs-12" style="height: 22px;" />
                        </div>
                    </div>
                </div>
                <div class="col-md-4 col-sm-4 col-xs-12  no-padding">
                    <div class="form-group">
                        <label class="col-sm-6 col-md-4 col-xs-4 control-label no-padding" for="form-field-1">
                            Reference No.
                        </label>
                        <div class="col-sm-6 col-md-7 col-xs-7 no-padding-left displayinlineblock">
                            <input type="text" name="Reference" #Reference class="col-sm-12 col-md-12 col-xs-12" style="height: 22px;" />
                        </div>
                    </div>
                </div>
            </div>
            <div class="row no-padding">
                <div class="col-md-4 col-sm-4 col-xs-12">
                    <div class="form-group">
                        <label class="col-sm-6 col-md-4 col-xs-4 control-label no-padding" for="form-field-1">
                            Bank
                        </label>
                        <div class="col-sm-6 col-md-7 col-xs-7 no-padding-left displayinlineblock">
                            <select id="" class="alldropdown" name="selected" #selected (change)="SelectBank(FromDate.value,ToDate.value,selected.value)">

                                <option *ngFor="let td of bankdrop" [value]="td.sponsorbankcode">{{td.name}}</option>



                            </select>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 col-sm-4 col-xs-12  no-padding">
                    <input type="button" class="col-md-2 col-sm-12 col-xs-12 btn btn-success" id="btnOk"
                           value="Search" (click)="SearchByReference(Reference.value)" style="margin-right: 12%; margin-top: 2%; margin-bottom: 2%;" />
                    <button type="button" class="btn btn-success" (click)="downloadExcel()">Download Mandate Excel File</button> &nbsp;
                    <label data-toggle="modal" data-target="#myModal" (click)="show()">
                        Reject Mandate
                    </label>

                    <button type="button" class="btn btn-success" (click)="downloadScannedMandate()">Download Scanned mandate</button> &nbsp; &nbsp;
                    <label [style.display]="MandateMessage ? 'block' : 'none'" [ngStyle]="{'color':'red'}">Please Select Mandate</label>
                    <!--<button type="button" class="btn btn-success" (click)="checkedDemo()"> Excel File DEmo</button>-->

                </div>
                <div class="col-md-4 col-sm-4 col-xs-12  no-padding">

                </div>
            </div>
        </div>

        <div class="col-md-12 col-sm-12 col-xs-12 loaderposition" id="divLoarder" *ngIf="Preloader">
            <img src="../../assets/images/loader.gif" style="margin-left: 45%;margin-top: 19%;" />
        </div>



        <div class="col-md-12 col-sm-12 col-xs-12" id="tbldiv">
            <table id="tbldownoldmandate">
                <thead>
                    <tr>
                        <th style="width:150px;"><input type="checkbox" name="all" vaule="all" (click)="toggleSelect($event)">All</th>
                        <th style="width:150px;">Mandate ID</th>
                        <th style="width:150px;">Name</th>
                        <th style="width:150px;">Date On Mandate</th>
                        <th style="width:150px;">Mandate Printed</th>
                        <th style="width:150px;">Mandate Scan</th>
                        <th style="width:150px;">Reference</th>
                        <th style="width:150px;">Amount</th>
                        <th style="width:150px;">Account No.</th>
                        <th style="width:150px;">IFSC/MICR</th>
                        <th style="width:150px;">Bank Name</th>
                        <th style="width:150px;">Frequency</th>
                        <th style="width:150px;">Debit Type</th>
                        <th style="width:150px;">Debit To</th>
                        <th style="width:150px;">Created on</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let td of tabledata; let i=index;">
                        <td style="width:150px;"><input type="checkbox" value="td.selected" [checked]="td.selected" (change)="onChange($event,td); td.selected = !(td.selected)" name="all"></td>
                        <td style="width:150px;">{{td.mandateid}}</td>
                        <td style="width:150px;">{{td.Customer1}}</td>
                        <td style="width:150px;">{{td.DateOnMandate}}</td>
                        <td style="width:150px;">{{td.IsPrint}}</td>
                        <td style="width:150px;">{{td.IsScan}}</td>
                        <td style="width:150px;">{{td.Refrence1}}</td>
                        <td style="width:150px;">{{td.Amount}}</td>
                        <td style="width:150px;">{{td.AcNo}}</td>
                        <td style="width:150px;">{{td.Code}}</td>
                        <td style="width:150px;">{{td.BankName}}</td>
                        <td style="width:150px;">{{td.Frequency}}</td>
                        <td style="width:150px;">{{td.debittype}}</td>
                        <td style="width:150px;">{{td.ToDebit}}</td>
                        <td style="width:150px;">{{td.createdon}}</td>
                    </tr>
                    <tr *ngIf="tabledata?.length == 0">
                        <td colspan="3">No Record Found!</td>
                    </tr>
                    <!--<tr *ngIf="tabledata?.length != 0">
                        <td [ngClass]="['loadernone']"></td>
                    </tr>-->

                </tbody>

            </table>

        </div>
    </div>
</div>
<!--<div class="container">
    <!-- Modal -
    <div class="modal" id="myModal" role="dialog" [style.display]="showModal ? 'block':'none'">
        <div class="modal-dialog">

            <!-- Modal content
            <div class="modal-content">
                <div class="modal-header">

                    <h5 class="modal-title" style="text-align:center">Are you Sure to Reject Mandate</h5>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-sm-3">
                            <label>Reason</label>
                        </div>
                        <div class="col-sm-8">
                            <textarea class="form-control" id="myform" #RejectedReason placeholder="Enter The Reason"></textarea>
                        </div>

                    </div>
                </div>
                <div class="modal-footer" style="text-align:center">

                    <button type="button" class="btn btn-primary" (click)="RejectData(FromDate.value,ToDate.value,RejectedReason.value,selected.value)">Reject</button> &nbsp;
                    <button type="button" class="btn btn-default" (click)="hide()" data-dismiss="modal">Close</button>
                </div>
            </div>

        </div>
    </div>
</div>-->



<div class="modal" id="myModal" role="dialog" [style.display]="showModal ? 'block':'none'">
    <div class="modal-dialog">
        <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header">
                <h4 class="modal-title">
                    <div class="col-md-12" style="text-align:center;">
                        <img src="../../assets/images/caution.png" style="width:11%;" />
                    </div>
                    <label class="col-md-12 col-sm-12 col-xs-12" style="text-align:center;">Are you sure you want to reject mandate ?</label>
                </h4>

                <button type="button" class="close" data-dismiss="modal" (click)="hide()">&times;</button>
            </div>

            <!-- Modal body -->
            <div class="modal-body">
                <div class="form-group" style="margin-top: 2%; margin-bottom:3%;">
                    <div class="row">
                        <label class="col-sm-3 col-md-3 col-xs-3 control-label" for="form-field-1">
                            Reason
                        </label>
                        <div class="col-sm-9 col-md-9 col-xs-9 no-padding-left">
                            <textarea name=""  id="myform" #RejectedReason class="col-sm-12 col-md-12 col-xs-12 no-padding"></textarea>
                        </div>
                    </div>
                </div>

                <div class=" btfooter">


                    <button type="button" class="btn btn-primary "  data-dismiss="modal" (click)="RejectData(FromDate.value,ToDate.value,RejectedReason.value,selected.value)" style="width:48%; margin-right:4%">Reject</button>
                    <button type="button" class="btn btn-primary" (click)="hide()" data-dismiss="modal" style="width:48%">Cancel</button>
                </div>
            </div>



            <!-- Modal footer -->


        </div>
    </div>
</div>



<!--<div class="container">
    <div class="col-md-12 col-sm-12 col-xs-12 loaderposition" id="divLoarder2" *ngIf="loading" >      <!--*ngIf="loading"-->
<!--  ngHide="loading"  -->    <!--style="display: none;"-->
<!--<img src="../../ClientApp/assets/images/loader.gif" style="margin-left: 45%;margin-top: 19%;" />
</div>
</div>-->

<div class="modal" id="myModal" [style.display]="SuccessModal ? 'block' : 'none'">
    <div class="modal-dialog">
        <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header">
                <h4 class="modal-title">
                    <img src="../../assets/images/saveSuccessImg.png" />
                </h4>
                <button type="button" class="close" data-dismiss="modal" (click)="hidemandate()">&times;</button>
            </div>
            <!-- Modal body -->
            <div class="modal-body">
                <p>Saved Successfully</p>
            </div>
            <!-- Modal footer -->
            <div class="modal-footer">
                <button type="button" class="btn btn-success" data-dismiss="modal" (click)="hidemandate()">Close</button>
            </div>
        </div>
    </div>
</div>